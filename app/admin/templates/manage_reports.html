{% extends "base.html" %}
{% block content %}
<h2>Manage Reports</h2>

<table class="table">
    <thead>
        <tr>
            <th>Report ID</th>
            <th>Generated By</th>
            <th>Appointment ID</th>
            <th>Feedback</th>
            <th>Teacher Response</th>
            <th>Created At</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for r in reports %}
        <tr>
            <td>{{ r.report_id }}</td>
            <td>{{ r.generated_by }}</td>
            <td>{{ r.appointment_id }}</td>
            <td>{{ r.feedback or "—" }}</td>
            <td>{{ r.teacher_response or "—" }}</td>
            <td>{{ r.created_at.strftime("%Y-%m-%d %H:%M") if r.created_at else "—" }}</td>
            <td>
                <form action="{{ url_for('admin.delete_report', report_id=r.report_id) }}" method="post" style="display:inline-block;" onsubmit="return confirm('Are you sure you want to delete this report?');">
                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% if total_pages > 1 %}
<div class="pagination-wrapper">
    <div class="pagination">
        {% for p in range(1, total_pages + 1) %}
        <a href="{{ url_for('admin.manage_reports', status=status_filter, page=p) }}"
        class="pagination-button {% if p == current_page %}active{% endif %}">
        {{ p }}
        </a>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}
